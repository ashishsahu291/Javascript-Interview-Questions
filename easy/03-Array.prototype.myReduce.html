<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Array Prototype</title>
  </head>
  <body>
    <h1>
      Array.prototype.reduce is a way of "reducing" elements in an array by
      calling a "reducer" callback function on each element of the array in
      order, passing in the return value from the calculation on the preceding
      element. The final result of running the reducer across all elements of
      the array is a single value. Implement Array.prototype.reduce. To avoid
      overwriting the actual Array.prototype.reduce which is being used by the
      autograder, we shall instead implement it as Array.prototype.myReduce.
    </h1>

    <code
      >[1, 2, 3].myReduce((prev, curr) => prev + curr, 0); // 6 <br />
      [1, 2, 3].myReduce((prev, curr) => prev + curr, 4); // 10
    </code>

    <script>
      Array.prototype.myReduce = function (callbackFn, initialValue) {
        if (typeof callbackFn != "function") {
          throw SyntaxError("Reducer should have a callback logic");
        }

        const array = this;
        const length = array.length === 0;
        const hasInitialVal = arguments.length > 1;

        if (length && !hasInitialVal) {
          throw TypeError("No initial value provided and array is empty.");
        }

        if (length) {
          return initialValue;
        }

        let acc;
        let startIdx = 0;

        if (hasInitialVal) {
          acc = initialValue;
        } else {
          acc = array[0];
          startIdx = 1;
        }

        for (let i = startIdx; i < array.length; i++) {
          if (i in array) {
            acc = callbackFn(acc, array[i], i, array);
          }
        }

        return acc;
      };

      // Tests

      const add = (prev, curr) => prev + curr;
      const multiplyByIndex = (prev, curr, index) => {
        return prev + curr * index;
      };
      const subtract = (prev, curr) => prev - curr;
      const sumOfSquares = (prev, curr, index, array) =>
        prev + curr * array[index];
      const combineObj = (prev, curr) => ({ ...prev, ...curr });
      const combineArr = (prev, curr) => [...prev, curr];

      // const test = [1, 2, 3].myReduce(add, 0);
      // const test = [1, 2, 3].myReduce(multiplyByIndex, 0);
      // const test = [1, 2, 3].myReduce(subtract, 0);
      // const test = [1, 2, 3].myReduce(sumOfSquares, 0);
      // const test = [{ foo: 1 }, { bar: 2 }].myReduce(combineObj);
      // const test = [{ foo: 1 }, { bar: 2 }].myReduce(combineObj, {});
      // const test = [1, 2, 3].myReduce(combineArr, [4, 5]);
      const test = [1, 2, 3, , 5].myReduce(add, 0);

      //   const test1 = [1, 2, 3].reduce((acc, curr, i) => {
      //     console.log("acc in index", i, "is", acc);
      //     return acc + curr;
      //   });

      console.log(test);
    </script>
  </body>
</html>
